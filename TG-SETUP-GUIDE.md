# Telegramç¾¤ç»„åª’ä½“æŠ“å–å™¨ - å¿«é€Ÿè®¾ç½®æŒ‡å—

## ðŸš€ åŠŸèƒ½ç‰¹æ€§
- âœ… è‡ªåŠ¨æŠ“å–Telegramç¾¤ç»„çš„å›¾ç‰‡å’Œè§†é¢‘
- âœ… æ”¯æŒè‡ªå®šä¹‰æ ‡ç­¾
- âœ… è‡ªåŠ¨ä¸Šä¼ åˆ°æ‚¨çš„åª’ä½“ç®¡ç†ç½‘ç«™
- âœ… æ”¯æŒæ‰¹é‡å¤„ç†å¤šä¸ªç¾¤ç»„
- âœ… å¯é…ç½®æŠ“å–æ—¶é—´èŒƒå›´å’Œæ–‡ä»¶æ•°é‡é™åˆ¶

## ðŸ“‹ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: å®‰è£…ä¾èµ–
```bash
# å®‰è£…TelegramæŠ“å–å™¨ä¾èµ–
npm run install-tg-deps
```

### æ­¥éª¤2: èŽ·å–Telegram APIå¯†é’¥
1. è®¿é—® https://my.telegram.org/apps
2. ä½¿ç”¨æ‚¨çš„Telegramè´¦å·ç™»å½•
3. ç‚¹å‡»"Create new application"
4. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - App title: `åª’ä½“æŠ“å–å™¨`
   - Short name: `media-scraper`
   - Platform: `Desktop`
5. èŽ·å– `api_id` å’Œ `api_hash`

### æ­¥éª¤3: é…ç½®æŠ“å–å™¨
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp tg-config-example.js tg-config.js
```

ç¼–è¾‘ `tg-config.js` æ–‡ä»¶ï¼š
```javascript
module.exports = {
  telegram: {
    // æ›¿æ¢ä¸ºæ‚¨çš„APIå¯†é’¥
    apiId: '12345678',           // æ‚¨çš„api_id
    apiHash: 'abcdef1234567890', // æ‚¨çš„api_hash
    sessionString: '',           // é¦–æ¬¡è¿è¡ŒåŽä¼šè‡ªåŠ¨ç”Ÿæˆ
    phoneNumber: '+86138xxxxxxxx', // æ‚¨çš„æ‰‹æœºå·
  },
  
  website: {
    url: 'http://localhost:3000', // æ‚¨çš„ç½‘ç«™åœ°å€
    adminCredentials: {
      username: 'admin',          // ç®¡ç†å‘˜ç”¨æˆ·å
      password: 'admin123'        // ç®¡ç†å‘˜å¯†ç 
    }
  },
  
  scraping: {
    // è¦æŠ“å–çš„ç¾¤ç»„ï¼ˆéœ€è¦æ˜¯ç¾¤ç»„çš„ç”¨æˆ·åï¼Œä¸æ˜¯æ˜¾ç¤ºåç§°ï¼‰
    groups: [
      '@your_group_username1',
      '@your_group_username2',
    ],
    
    // è‡ªåŠ¨æ·»åŠ çš„æ ‡ç­¾
    tags: [
      'TelegramæŠ“å–',
      'è‡ªåŠ¨ä¸Šä¼ ',
      'ç¾¤ç»„å†…å®¹'
    ],
    
    maxFiles: 50,    // æ¯ä¸ªç¾¤ç»„æœ€å¤§æŠ“å–æ–‡ä»¶æ•°
    timeRange: 24,   // æŠ“å–æœ€è¿‘24å°æ—¶çš„å†…å®¹
  }
};
```

### æ­¥éª¤4: æµ‹è¯•é…ç½®
```bash
# æµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®
npm run tg-scraper:test
```

### æ­¥éª¤5: å¼€å§‹æŠ“å–
```bash
# å¼€å§‹æŠ“å–åª’ä½“æ–‡ä»¶
npm run tg-scraper
```

## ðŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰æ ‡ç­¾
æ‚¨å¯ä»¥ä¸ºä¸åŒçš„ç¾¤ç»„è®¾ç½®ä¸åŒçš„æ ‡ç­¾ï¼š
```javascript
scraping: {
  groups: [
    '@tech_group',
    '@photo_group',
    '@video_group',
  ],
  tags: [
    'æŠ€æœ¯åˆ†äº«',
    'æ‘„å½±ä½œå“',
    'è§†é¢‘å†…å®¹'
  ],
}
```

### æ—¶é—´èŒƒå›´è®¾ç½®
```javascript
scraping: {
  timeRange: 48, // æŠ“å–æœ€è¿‘48å°æ—¶çš„å†…å®¹
}
```

### æ–‡ä»¶æ•°é‡é™åˆ¶
```javascript
scraping: {
  maxFiles: 100, // æ¯ä¸ªç¾¤ç»„æœ€å¤šæŠ“å–100ä¸ªæ–‡ä»¶
}
```

## ðŸ“± èŽ·å–ç¾¤ç»„ç”¨æˆ·å

### æ–¹æ³•1: é€šè¿‡ç¾¤ç»„é“¾æŽ¥
1. åœ¨Telegramä¸­æ‰¾åˆ°ç¾¤ç»„
2. ç‚¹å‡»ç¾¤ç»„åç§°è¿›å…¥ç¾¤ç»„ä¿¡æ¯
3. ç‚¹å‡»"åˆ†äº«ç¾¤ç»„"
4. å¤åˆ¶é“¾æŽ¥ï¼Œç”¨æˆ·ååœ¨é“¾æŽ¥ä¸­ï¼š`https://t.me/group_username`

### æ–¹æ³•2: é€šè¿‡ç¾¤ç»„è®¾ç½®
1. è¿›å…¥ç¾¤ç»„è®¾ç½®
2. æŸ¥çœ‹"ç¾¤ç»„ç±»åž‹"
3. å¦‚æžœè®¾ç½®äº†ç”¨æˆ·åï¼Œä¼šæ˜¾ç¤ºä¸º `@group_username`

## ðŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
npm run tg-scraper:config

# æµ‹è¯•é…ç½®
npm run tg-scraper:test

# å¼€å§‹æŠ“å–
npm run tg-scraper

# æŸ¥çœ‹å¸®åŠ©
node run-tg-scraper.js --help
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡è¿è¡Œ**ï¼šéœ€è¦è¾“å…¥æ‰‹æœºéªŒè¯ç è¿›è¡Œç™»å½•
2. **ç¾¤ç»„æƒé™**ï¼šç¡®ä¿æ‚¨æœ‰æƒé™è®¿é—®è¦æŠ“å–çš„ç¾¤ç»„
3. **APIé™åˆ¶**ï¼šéµå®ˆTelegramçš„APIä½¿ç”¨é™åˆ¶
4. **å­˜å‚¨ç©ºé—´**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´å­˜å‚¨ä¸´æ—¶æ–‡ä»¶
5. **ç½‘ç»œè¿žæŽ¥**ï¼šéœ€è¦ç¨³å®šçš„ç½‘ç»œè¿žæŽ¥

## ðŸ› æ•…éšœæŽ’é™¤

### ç™»å½•å¤±è´¥
- æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
- ç¡®ä¿æ‰‹æœºå·æ ¼å¼æ­£ç¡®ï¼ˆåŒ…å«å›½å®¶ä»£ç ï¼‰
- æ£€æŸ¥ç½‘ç»œè¿žæŽ¥

### æŠ“å–å¤±è´¥
- æ£€æŸ¥ç¾¤ç»„ç”¨æˆ·åæ˜¯å¦æ­£ç¡®
- ç¡®ä¿æœ‰æƒé™è®¿é—®ç¾¤ç»„
- æ£€æŸ¥ç¾¤ç»„æ˜¯å¦æœ‰åª’ä½“æ–‡ä»¶

### ä¸Šä¼ å¤±è´¥
- æ£€æŸ¥ç½‘ç«™åœ°å€æ˜¯å¦æ­£ç¡®
- éªŒè¯ç®¡ç†å‘˜å‡­æ®
- ç¡®ä¿ç½‘ç«™æœåŠ¡æ­£åœ¨è¿è¡Œ

## ðŸ“Š æŠ“å–æŠ¥å‘Š

æ¯æ¬¡æŠ“å–å®ŒæˆåŽï¼Œä¼šç”Ÿæˆè¯¦ç»†çš„æŠ¥å‘Šæ–‡ä»¶ï¼š
- æ€»æ–‡ä»¶æ•°ç»Ÿè®¡
- æŒ‰ç±»åž‹åˆ†ç±»ç»Ÿè®¡
- æŒ‰ç¾¤ç»„åˆ†ç±»ç»Ÿè®¡
- æ–‡ä»¶å¤§å°ç»Ÿè®¡
- è¯¦ç»†çš„æ–‡ä»¶åˆ—è¡¨

## ðŸ”„ è‡ªåŠ¨åŒ–è¿è¡Œ

### ä½¿ç”¨cronå®šæ—¶ä»»åŠ¡
```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹è¿è¡Œï¼‰
0 2 * * * cd /path/to/your/project && npm run tg-scraper
```

### ä½¿ç”¨PM2ç®¡ç†
```bash
# å®‰è£…PM2
npm install -g pm2

# åˆ›å»ºPM2é…ç½®æ–‡ä»¶
cat > ecosystem.config.js << 'EOF'
module.exports = {
  apps: [{
    name: 'tg-scraper',
    script: 'run-tg-scraper.js',
    cron_restart: '0 2 * * *', // æ¯å¤©å‡Œæ™¨2ç‚¹è¿è¡Œ
    autorestart: false,
    watch: false,
  }]
};
EOF

# å¯åŠ¨PM2ä»»åŠ¡
pm2 start ecosystem.config.js
```

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
2. ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸
3. ç¾¤ç»„æƒé™æ˜¯å¦è¶³å¤Ÿ
4. ç½‘ç«™æœåŠ¡æ˜¯å¦è¿è¡Œ

---

ðŸŽ‰ çŽ°åœ¨æ‚¨å¯ä»¥å¼€å§‹ä½¿ç”¨Telegramåª’ä½“æŠ“å–å™¨äº†ï¼

